@startuml
!theme plain
left to right direction

actor User

rectangle "Virtual Fridge App" << System >> {

  ' ==== Authentication ====
  usecase signUp as "Sign Up with Google"
  usecase signIn as "Sign In with Google"
  usecase signOut as "Sign Out"
  usecase deleteAccount as "Delete Account"

  ' ==== Logging Food ====
  usecase logFood as "Log Food"
  usecase logImage as "Log Food via Image"
  usecase logBarcode as "Log Food via Barcode"
'  usecase logList as "Log Food via Pre-Made List"

  ' Extensions (placed right after their base)
  logImage -left-> logFood : <<extend>>
  logBarcode -left-> logFood : <<extend>>

  ' ==== Viewing Food ====
  usecase viewInventory as "View Fridge"
  usecase sortExp as "Sort by Expiration Date"
  usecase sortAdded as "Sort by Added Date"

  ' Extensions (placed right after base)
  sortExp -left-> viewInventory : <<extend>>
  sortAdded -right-> viewInventory : <<extend>>

  ' ==== Recipes & Nutrition ====
  usecase getRecipes as "Get Recipes"
  usecase genRecipes as "Generate Recipe Suggestions with AI"
  usecase findRecipes as "Find Recipe Suggestions"
  usecase viewRecipe as "View Recipe Details"
  usecase viewNutrition as "View Nutritional Facts"

  ' Extensions (placed immediately below related base)
  genRecipes -left-> getRecipes : <<extend>>
  findRecipes -right-> getRecipes : <<extend>>
  viewRecipe -right-> getRecipes : <<extend>>
}

' ==== External APIs (RHS) ====
rectangle googleAuth as "Google Authentication"
rectangle barcodeApi as "Barcode API"
rectangle recipeApi as "TheMealDB API"
rectangle nutritionApi as "OpenFoodFacts API"
rectangle GeminiApi as "Gemini API"

' ==== User connections ====
User -- signUp
User -- signIn
User -- signOut
User -- deleteAccount
User -- logFood
User -- viewInventory
User -- getRecipes
User -- viewRecipe
User -- viewNutrition

' ==== API connections ====
signUp -- googleAuth
signIn -- googleAuth

logBarcode -- barcodeApi
logBarcode -- nutritionApi
logFood -- nutritionApi
logImage -- nutritionApi
logImage -- GeminiApi

genRecipes -- recipeApi
genRecipes -- GeminiApi
viewRecipe -- recipeApi
viewNutrition -- nutritionApi

@enduml

