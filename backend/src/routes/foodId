import { Router } from "express";
import { FoodIdController } from "../controllers/foodId";
import { validateBody } from "../middleware/validation";
import { aiFoodRequestSchema, AiFoodRequestBody } from "../types/foodId";

const router = Router();
const foodIdController = new FoodIdController();

// POST /foodid/ai
// Accepts a prompt + base64 image, sends to Gemini, and stores FoodType
router.post(
  "/dom",
  validateBody<AiFoodRequestBody>(aiFoodRequestSchema),
  foodIdController.analyzeFood
);

export default router;
